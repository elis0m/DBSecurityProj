package com.jeeihyun.client.net;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;

import com.secho.client.handle.ClientDataHandle;


public class ClientThread extends Thread implements Runnable {

	 	DataInputStream input;
	    DataOutputStream output;
	    ClientDataHandle cDataHandle;
	    
	    public ClientThread(Socket Socket, DataInputStream input, DataOutputStream output) {
	     //this.Socket = Socket;
	        try {
	               // input = new DataInputStream(Socket.getInputStream());  //클라이언트로 부터 입력되는 데이타를 받아내는곳
	               // output = new DataOutputStream(Socket.getOutputStream()); //서버(나)에서 클라이언트로 데이타를 출력(보내는)해주는 곳.                                                      
	                this.input = input;
	                this.output = output;
	                cDataHandle = new ClientDataHandle();          
	                                
	                    
	        } catch (Exception e) {
	                e.printStackTrace();
	        }
	    }
	
	
    public void run() {    	
    	String msg="";    
            while (true) {
                    try {
                            msg = input.readUTF();
                            if ((msg.charAt(0))=='@'){
                                System.out.println("서버로부터 파일 리스트를 받기 성공");
                                cDataHandle.makeList(msg);
                                cDataHandle.print();
                            }else {
                            	 System.out.println("[에러발생]서버로부터 받은 메세지 ==>  ");
                            	 System.out.println(msg);                            	 
                                 cDataHandle.print();
                            }
                    } catch (IOException e) {
                            System.out.println("서버와 소켓 연결 해제.");
                            break;
                    }
            }
     }
}
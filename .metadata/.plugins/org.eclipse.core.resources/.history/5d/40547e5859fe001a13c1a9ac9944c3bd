package com.jeeihyun.client.handle;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.StringTokenizer;
import java.util.Vector;

import com.secho.client.net.Client;
import com.secho.client.security.AES;

public class ClientDataHandle {
    
    public static String keyword = "";

    public ClientDataHandle(){
      
        int[][] b = new int[3][3];
        int a = b.length;
    }
    
  
    
  
    public void makeList(String msg){
        FileHandler fl = new FileHandler();
        ArrayList<String> filename = new ArrayList<>();
        StringTokenizer list = new StringTokenizer(msg);
        while (list.hasMoreTokens()) {
            filename.add(list.nextToken("@"));
        }
        for(int i = 0; i < filename.size(); i++){
            fl.getEncFile(filename.get(i),keyword);
        }

    }
    
    
    
    public void SendTSet(DataOutputStream output, ArrayList<String> list){
        try{
            for(int i = 0; i < list.size(); i++){
                output.writeUTF(list.get(i));
            }
            output.writeUTF("$");
        }
        catch (IOException e){
            e.printStackTrace();
        }
    }
    
    public void send(DataOutputStream output, String keyword){
        try{            
            output.writeUTF("※" + keyword);            
            //output.writeUTF("※");
        }
        catch (IOException e){
            e.printStackTrace();
        }
    }
    
    
    public void SendKeyword(DataOutputStream output){
        AES aes = new AES();
        FileHandler fl = new FileHandler();
        ArrayList<String> kword = fl.getKeyword();
        String keyt = fl.getKey(0);

        System.out.println("사용 가능한 검색 키워드(KEYWORD)");
        for(int i = 0; i < kword.size(); i++)   System.out.print(kword.get(i)+"   ");
        System.out.println();
        Scanner sc = new Scanner(System.in);
        String a;
        while(true){
            System.out.println("검색 할 키워드를 입력해주세요.");
            a = sc.next();
            if(kword.contains(a)) break;
            else System.out.println("사용 가능한 키워드 리스트를 잘 보고 검색하세요.");
        }
        keyword = a;
        String keyword = aes.Function(a,keyt);
        try {
            output.writeUTF("※"+keyword);
            output.flush();
        }
        catch (IOException e){
            e.printStackTrace();
        }
        System.out.println("keyword를 보냈습니다.");
    }
    
   
}
